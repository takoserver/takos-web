<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/takos_logo.jpeg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>tako's</title>
    <script type="module">
      // 正しくインポートする
      import { Store } from "@tauri-apps/plugin-store";
      
      // 初期化関数を作成
      async function initApp() {
        try {
          if(window.location.origin.includes("localhost")) {
            window.isApp = true;
            // Storeを正しく使用する
            const store = await Store.load(".settings.dat");
            const serverEndpoint = await store.get("serverEndpoint");
            window.serverEndpoint = serverEndpoint || null;
            console.log("Server endpoint loaded:", window.serverEndpoint);
          } else {
            window.serverEndpoint = window.location.hostname;
            console.log("Using hostname as server endpoint:", window.serverEndpoint);
          }
        } catch (error) {
          console.error("Failed to load server endpoint:", error);
          window.serverEndpoint = null;
        }
      }
      
      // 初期化を実行
      initApp();
    </script>
  </head>
  <body>
    <!--
      .`.`.`.`.`.............................. .`.`.`.`.
      `..``.`.`.,MM$>>>>>>>>>>>>>>>>>?>>>>?dMM...`.`.`.`
      .``..`...M#9>>>>>>>>>>>>>>>>>>>>>>>>>>?WM[``.``.`.
      `..`.` .M0<>>>>>>>>>>>>>>>>>>>>>>>>>>>>>1dNN.`.`.`
      `.`. .(MHC>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>JM.,.``.
      .``.`M#1>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>+CM]`.``
      `...MI>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>dE..`
      .`J#>>>>>>>>>>>>>>jNN2>>>>>>>qNN<>>>>>>>>>>>>>jM_.
      `Mb>>>>>>>>>>>>>>>dMM$>>>>>>>dMM<>>>>>>>>>>>>>>>M]
      `MP>>>>>>>>>>>>>>>>>>qggg2>>>>>>>>>>>>>>>>>>>>>>M]
      .MP>>>>>>>>>>>>>>>>>>MN&>d@>>>>>>>>>>>>>>>>>>>>>M]
      .MNp>>>>>>>>>>>>>>>>>>?9g2>>>>>>>>>>>>;>>>>>>>>>M]
      ``d#>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>;>>>>>M]
      .`?5g+>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>M]
      ..`,Mz<>>>>>>>>>>;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>M]
      MMn,`Mb>>>>>>>>>>>>>>>>>>>>>>>>;>>>;>>>;>>>>>>+&Tt
      M>OXmwqK>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>;>jm?~.
      MDJMdd#>>>>>>>>>>>>>;>>>;>>>>>>>>>>>>>>>>+&d5`.``
      "Qp+YY5>>>>>>>>>;>>>>>>>>>>>>>>>>>>>>>>>um7!`.`.`
      ``dE&>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>;MF`.```.``
      .`.,"gx>>>>>>>>>>>>>>>>>>>>>>;>>>;>>>>>>Th- .`.``.
      `.`.N1<>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>++1M[.`.``
      ..dE+&x>>>>j&+>>>>u&>>;>>uJ>>>>>ux>>>>+&T5&<dB...`
      .MIdm?qK>>qK?qR>>qP?N2>+Nr1Nz>jN<jm>>jN?`.<NPJM~`.
      .MMD``d#>>d@`Mb>>MF.MP>+M],Mz>jM_-N>>JN `...JMM~.`
      `.`..`?4ggv=`7uggY^ "Qgm"^."Qgm"`,"ggs7.````.``.``
    -->
    <div id="root"></div>
    <script type="module" src="/src/index.tsx"></script>
  </body>
</html>
